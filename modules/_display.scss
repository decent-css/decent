// Copyright (c) 2016-2017, Christian Griffith & Sean Washington.
//
// Permission is hereby granted, free of charge, to any person obtaining a copy
// of this software and associated documentation files (the "Software"), to deal
// in the Software without restriction, including without limitation the rights
// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
// copies of the Software, and to permit persons to whom the Software is
// furnished to do so, subject to the following conditions:
//
// The above copyright notice and this permission notice shall be included in all
// copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
// SOFTWARE.

// ----------------------------------------------------------------------------
// Defaults
// ----------------------------------------------------------------------------
$breakpoints: (
  sm: '(min-width: 600px)',
  md: '(min-width: 768px)',
  lg: '(min-width: 1280px)',
  xl: '(min-width: 1440px)'
) !default;

$ratios: (
  1_1: 1/1,
  1_2: 2/1,
  4_3: 3/4,
  5_3: 3/5,
  16_9: 9/16,
  21_9: 9/21,
  36_9: 9/36,
  iphone7: 1334/750,
  macbookpro15: 1800/2880
) !default;

// Display Properties.
// ----------------------------------------------------------------------------
// Keep elements in DOM for accessibility but hidden from view.
.d-hidden {
  visibility: hidden;
  pointer-events: none;
  position: absolute;
  left: -300%;
}

.d-inline-block { display: inline-block; }
.d-block { display: block; }
.d-none { display: none; }

.d-full {
  width: 100%;
  height: 100vh;
}

// Overflow Properties.
// ----------------------------------------------------------------------------
.o-auto {
  overflow: auto;
  -webkit-overflow-scrolling: touch;
}

.o-visible { overflow: visible; }
.o-hidden { overflow: hidden; }

.no-wrap { white-space: nowrap; }

// Vertical alignment.
// ----------------------------------------------------------------------------
.va-top { vertical-align: top; }
.va-middle { vertical-align: middle; }
.va-bottom { vertical-align: bottom; }
.va-text-bottom { vertical-align: text-bottom; }

@each $abbr, $breakpoint in $breakpoints {
  @media #{$breakpoint} {
    .#{$abbr}-d-inline-block { display: inline-block; }
    .#{$abbr}-d-block { display: block; }
    .#{$abbr}-d-none { display: none; }

    .#{$abbr}-d-full {
      width: 100%;
      height: 100vh;
    }

    .#{$abbr}-o-auto {
      overflow: auto;
      -webkit-overflow-scrolling: touch;
    }
    .#{$abbr}-o-visible { overflow: visible; }
    .#{$abbr}-o-hidden { overflow: hidden; }

    .#{$abbr}-no-wrap { white-space: nowrap; }

    .#{$abbr}-va-top { vertical-align: top; }
    .#{$abbr}-va-middle { vertical-align: middle; }
    .#{$abbr}-va-bottom { vertical-align: bottom; }
    .#{$abbr}-va-text-bottom { vertical-align: text-bottom; }
  }
}

// Aspect ratios.
// ----------------------------------------------------------------------------
[class^='ratio-'],
[class*=' ratio-'] {
  width: 100%;
  position: relative;

  &::before {
    content: "";
    display: block;
  }

  & > *:not([class*='absolute']) {
    position: absolute;
    top: 0;
    left: 0;
  }

  @each $name, $ratio in $ratios {
    &[class*='#{$name}']::before { padding-top: ($ratio * 100) + 0%; }
    // Cool little trick thanks to http://www.mademyday.de/css-height-equals-width-with-pure-css.html.
  }
}

// [WIP] Background Image Properties.
// ----------------------------------------------------------------------------
[class^='bg-'],
[class*=' bg-'] {
  &[class*='cover'] { background-size: cover; }
}

// [WIP] Image Cropping.
// ----------------------------------------------------------------------------
.crop,
[class^='crop-'],
[class*=' crop-'] {
  overflow: hidden;

  &[class*='fit'] { width: 100%; }

  &[class*='cover'] img {
    // https://css-tricks.com/almanac/properties/o/object-fit/
    min-height: 100%;
    object-fit: cover;
  }
}

// ----------------------------------------------------------------------------
// Deprecation.
// ----------------------------------------------------------------------------

// v1.0.2
// ----------------------------------------------------------------------------
// We're changing `.hidden` to `.d-hidden` to be more explicit that this is
// technically a display property.
.hidden { @extend .d-hidden; }
